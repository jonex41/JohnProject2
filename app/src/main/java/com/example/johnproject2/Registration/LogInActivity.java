package com.example.johnproject2.Registration;import android.app.ProgressDialog;import android.content.Intent;import android.os.Bundle;import androidx.annotation.NonNull;import androidx.annotation.Nullable;import androidx.appcompat.app.AppCompatActivity;import android.text.TextUtils;import android.view.View;import android.widget.Button;import android.widget.EditText;import android.widget.ProgressBar;import android.widget.TextView;import android.widget.Toast;import com.example.johnproject2.R;import com.example.johnproject2.maplocationpicker.LocationPickerActivity;import com.google.android.gms.tasks.OnCompleteListener;import com.google.android.gms.tasks.Task;import com.google.firebase.auth.AuthResult;import com.google.firebase.auth.FirebaseAuth;/** * Created by MR AGUDA on 14-Nov-17. */public class LogInActivity extends AppCompatActivity  {    private EditText email, password, church_name;    private Button button;    private TextView register;    @Override    protected void onCreate(@Nullable Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.login_activity);        email = findViewById(R.id.txt_email);        password = findViewById(R.id.password);        button = findViewById(R.id.signin);        register = findViewById(R.id.register);findViewById(R.id.forgot_password).setOnClickListener(new View.OnClickListener() {    @Override    public void onClick(View view) {        if(!TextUtils.isEmpty(email.getText().toString())) {            final ProgressDialog dialog = new ProgressDialog(LogInActivity.this);            dialog.setMessage("Please wait...");            dialog.setIndeterminate(true);            dialog.show();            FirebaseAuth.getInstance().sendPasswordResetEmail(email.getText().toString())                    .addOnCompleteListener(new OnCompleteListener<Void>() {                        @Override                        public void onComplete(@NonNull Task<Void> task) {                            if (task.isSuccessful()) {                                dialog.dismiss();                                Toast.makeText(LogInActivity.this, "Password reset has been successfully sent to your email", Toast.LENGTH_SHORT).show();                            }else {                                dialog.dismiss();                                Toast.makeText(LogInActivity.this, "Please try again later", Toast.LENGTH_SHORT).show();                            }                        }                    });        }else {            Toast.makeText(LogInActivity.this, "Please enter your email", Toast.LENGTH_SHORT).show();        }    }});        register.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                    Intent intent = new Intent(getApplicationContext(), RegisterActivity.class);                    startActivity(intent);                    finish();            }        });        button.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {              final   ProgressDialog progressDialog = new ProgressDialog(LogInActivity.this);                progressDialog.setMessage("Please wait.... ");                progressDialog.setCancelable(false);                progressDialog.show();                String emails =  email.getText().toString();                String passwords = password.getText().toString();                if(!TextUtils.isEmpty(emails) && !TextUtils.isEmpty(passwords)) {                    FirebaseAuth.getInstance().signInWithEmailAndPassword(emails, passwords).addOnCompleteListener(new OnCompleteListener<AuthResult>() {                        @Override                        public void onComplete(@NonNull Task<AuthResult> task) {                            if(task.isSuccessful()){                                String uid = FirebaseAuth.getInstance().getCurrentUser().getUid();                                    progressDialog.dismiss();                                    Intent intent = new Intent(getApplicationContext(), LocationPickerActivity.class);                                    startActivity(intent);                                    finish();                            }else{                                progressDialog.dismiss();                                Toast.makeText(LogInActivity.this, "Please unable to sign in !!!", Toast.LENGTH_SHORT).show();                            }                        }                    });                }else {                    progressDialog.dismiss();                    Toast.makeText(LogInActivity.this, "Please all space most be filled", Toast.LENGTH_SHORT).show();                }            }        });    }}